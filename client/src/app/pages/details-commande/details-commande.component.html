<div class="container my-4">

  <!-- HEADER COMMANDE -->
  <div class="card shadow-sm mb-4">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <h5 class="mb-1">Commande <strong>{{ commande.numero }}</strong></h5>
        <small class="text-muted">
          Passée le {{ commande.createdAt |  date:'d MMM y à HH:mm' }}
        </small>
      </div>

      <span class="badge text-dark px-3 py-2"  [ngClass]="getStatutBadgeClass(commande.statut)">
        {{ commande.statut | uppercase }}
      </span>
    </div>
  </div>

  <!-- CLIENT & ADRESSE -->
  <div class="row mb-4">

    <!-- CLIENT -->
    <div class="col-md-6">
      <div class="card shadow-sm h-100">
        <div class="card-header fw-bold">
          Client
        </div>
        <div class="card-body">
          <p class="mb-1"><strong>Nom :</strong> {{ commande.client.nomComplet }}</p>
          <p class="mb-1"><strong>Email :</strong> {{ commande.client.email }}</p>
          <p class="mb-0"><strong>Téléphone :</strong> {{ commande.client.telephone }}</p>
        </div>
      </div>
    </div>

    <!-- ADRESSE -->
    <div class="col-md-6">
      <div class="card shadow-sm h-100">
        <div class="card-header fw-bold">
          Adresse de livraison
        </div>
        <div class="card-body">
          <p class="mb-1">
            {{ commande.adresseLivraison.prenom }}
            {{ commande.adresseLivraison.nom }}
          </p>
          <p class="mb-1" >
            {{commande.adresseLivraison.telephone || 'aucun contact'}}
          </p>
          <p class="mb-1">{{ commande.adresseLivraison.rue }}</p>
          <p class="mb-1">
            {{ commande.adresseLivraison.codePostal }},
            {{ commande.adresseLivraison.ville }}
          </p>
          <p class="mb-1">{{ commande.adresseLivraison.pays }}</p>
          <p class="text-muted fst-italic mb-0">
            {{ commande.adresseLivraison.instructions }}
          </p>
        </div>
      </div>
    </div>

  </div>

  <!-- PRODUITS -->
  <div class="card shadow-sm mb-4">
    <div class="card-header fw-bold">
      Produits commandés
    </div>

    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
        <tr>
          <th>Produit</th>
          <th>Prix</th>
          <th>Quantité</th>
          <th>Sous-total</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of commande.items">
          <td>
            <div class="d-flex align-items-center gap-3">
              <img
                [src]="item.imagePrincipaleUrl"
                class="rounded"
                style="width:60px;height:60px;object-fit:cover"
                alt="produit"
              />
              <div>
                <div class="fw-semibold">{{ item.nom }}</div>
                <small class="text-muted">{{ item.slug }}</small>
              </div>
            </div>
          </td>

          <td>{{ item.prix | number }} Ar</td>
          <td>x{{ item.quantite }}</td>
          <td class="fw-bold">{{ item.sousTotal | number }} Ar</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- TOTAL -->
  <div class="card shadow-sm">
    <div class="card-body">
      <div class="d-flex justify-content-between mb-2">
        <span>Sous-total</span>
        <strong>{{ commande.sousTotal | number }} Ar</strong>
      </div>

      <div class="d-flex justify-content-between mb-2">
        <span>Économies</span>
        <strong class="text-success">- {{ commande.economies | number }} Ar</strong>
      </div>

      <hr>

      <div class="d-flex justify-content-between fs-5">
        <span>Total</span>
        <strong class="text-primary">{{ commande.total | number }} Ar</strong>
      </div>

      <div class="mt-3 d-flex justify-content-between fs-5">
          Paiement : <span class="text-info" > {{ commande.modePaiement }}</span>
      </div>
      <div class="mt-3 d-flex justify-content-between fs-5">
        Statut paiement :<span>{{ commande.paiementStatut }}</span>
      </div>
    </div>
  </div>

</div>
