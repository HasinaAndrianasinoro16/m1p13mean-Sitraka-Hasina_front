<!-- Titre -->
<div class="row mb-4">
  <div class="col-12 text-center">
    <h3 class="fw-bold">
      <i class="nc-icon nc-cart-simple"></i>
      Acheter des produits
    </h3>
    <p class="text-muted">
      Choisissez vos produits et ajoutez-les à votre panier
    </p>
  </div>
</div>

<!-- Filtres -->
<div class="filter-card">
  <div class="filter-body">
    <div class="filter-row">

      <!-- Produit -->
      <div class="filter-group">
        <label>Produit</label>
        <input
          type="text"
          placeholder="Nom du produit"
          [(ngModel)]="filters.nom"
        />
      </div>

      <!-- Boutique -->
      <div class="filter-group">
        <label>Boutique</label>
        <select [(ngModel)]="filters.boutique">
          <option value="">Toutes les boutiques</option>
          <option *ngFor="let b of boutiques" [value]="b">
            {{ b }}
          </option>
        </select>
      </div>

      <!-- Prix min -->
      <div class="filter-group small">
        <label>Prix min</label>
        <input
          type="number"
          placeholder="0"
          [(ngModel)]="filters.prixMin"
        />
      </div>

      <!-- Prix max -->
      <div class="filter-group small">
        <label>Prix max</label>
        <input
          type="number"
          placeholder="∞"
          [(ngModel)]="filters.prixMax"
        />
      </div>

      <!-- Stock -->
      <div class="filter-group checkbox">
        <label class="checkbox-label">
          <input
            type="checkbox"
            [(ngModel)]="filters.stockOnly"
          />
          En stock seulement
        </label>
      </div>

    </div>
  </div>
</div>

<!-- Liste des produits -->
<div class="row g-4">

  <div
    class="col-xl-3 col-lg-4 col-md-6"
    *ngFor="let produit of produitsFiltres"
  >
    <div class="card product-card h-100 border-0 shadow-sm">

      <!-- Image -->
      <img
        [src]="produit.image"
        class="card-img-top product-image"
        alt="Produit"
      />

      <!-- Body -->
      <div class="card-body d-flex flex-column">

        <h5 class="fw-semibold mb-1">
         <a   class="link-warning"
              [routerLink]="['/detail-produit']"
              [queryParams]="{id: produit.id}">
           {{ produit.nom }}
         </a>
        </h5>

        <small class="text-muted mb-2">
          <i class="nc-icon nc-shop"></i>
          {{ produit.boutique }}
        </small>

        <h6 class="text-primary fw-bold mb-3">
          {{ produit.prix | number }} Ar
        </h6>

        <!-- Quantité -->
        <div class="d-flex align-items-center mb-3">
          <label class="me-2 text-muted">Qté</label>
          <input
            type="number"
            class="form-control form-control-sm w-50"
            [(ngModel)]="produit.quantite"
            [min]="1"
            [disabled]="produit.stock === 0"
          />
        </div>

        <!-- Stock -->
        <p class="text-muted small mb-3">
          <i class="nc-icon nc-box"></i>
          Stock disponible :
          <strong>{{ produit.stock }}</strong>
        </p>

        <!-- Bouton -->
        <button
          class="btn btn-dark w-100 mt-auto"
          (click)="ajouterAuPanier(produit)"
          [disabled]="produit.stock === 0"
        >
          <i class="nc-icon nc-cart-simple"></i>
          Ajouter au panier
        </button>

      </div>
    </div>
  </div>

</div>
